
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Slice bare-metal into sandboxes and services">
      
      
        <meta name="author" content="OpenFaaS Ltd">
      
      
        <link rel="canonical" href="https://docs.slicervm.com/examples/openfaas-edge/">
      
      
        <link rel="prev" href="../docker/">
      
      
        <link rel="next" href="../../tasks/userdata/">
      
      
      <link rel="icon" href="../../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>OpenFaaS Edge (All-In-One) - Slicer</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.bcfcd587.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto,+Helvetica:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto, Helvetica";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#openfaas-edge-in-slicer" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Slicer" class="md-header__button md-logo" aria-label="Slicer" data-md-component="logo">
      
  <img src="../../images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Slicer
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              OpenFaaS Edge (All-In-One)
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/slicervm/docs.slicervm.com" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    slicervm/docs.slicervm.com
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../.." class="md-tabs__link">
          
  
  Slicer for Linux

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../mac/overview/" class="md-tabs__link">
          
  
  Slicer for Mac

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Slicer" class="md-nav__button md-logo" aria-label="Slicer" data-md-component="logo">
      
  <img src="../../images/logo.png" alt="logo">

    </a>
    Slicer
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/slicervm/docs.slicervm.com" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    slicervm/docs.slicervm.com
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Slicer for Linux
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Slicer for Linux
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contact/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contact us
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_3" >
        
          
          <label class="md-nav__link" for="__nav_1_3" id="__nav_1_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_3">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/walkthrough/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Walkthrough
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/daemon/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running in the background
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4" checked>
        
          
          <label class="md-nav__link" for="__nav_1_4" id="__nav_1_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_4">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../run-a-task/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Run a one-shot task via API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_4_2" >
        
          
          <label class="md-nav__link" for="__nav_1_4_2" id="__nav_1_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Kubernetes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4_2">
            <span class="md-nav__icon md-icon"></span>
            Kubernetes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ha-k3s/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HA Kubernetes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../autoscaling-k3s/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Autoscaling Kubernetes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../large-scale-k3s/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Large scale Kubernetes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../multiple-machine-k3s/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multiple machine Kubernetes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k3s-gpu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    K3s with a GPU
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../openfaas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenFaaS on K3s
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_4_3" >
        
          
          <label class="md-nav__link" for="__nav_1_4_3" id="__nav_1_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    AI/LLMs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4_3">
            <span class="md-nav__icon md-icon"></span>
            AI/LLMs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gpu-ollama/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ollama with a GPU
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../opencode-agent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Headless OpenCode Coding Agent
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cursor-cli-agent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Headless Cursor Coding Agent
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_4_4" >
        
          
          <label class="md-nav__link" for="__nav_1_4_4" id="__nav_1_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Productivity
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4_4">
            <span class="md-nav__icon md-icon"></span>
            Productivity
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../buildkit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Remote Docker builds over SSH
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../remote-vscode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Remote VSCode
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pihole-adblock/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PiHole Adblocker
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../jenkins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Run Jenkins for CI/CD
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../router-firewall/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create a Linux Router/Firewall
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Run containers with Docker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    OpenFaaS Edge (All-In-One)
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    OpenFaaS Edge (All-In-One)
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#userdata" class="md-nav__link">
    <span class="md-ellipsis">
      Userdata
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vm-config" class="md-nav__link">
    <span class="md-ellipsis">
      VM config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-openfaas-edge" class="md-nav__link">
    <span class="md-ellipsis">
      Run OpenFaaS Edge
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-and-deploy-a-function-within-the-vm" class="md-nav__link">
    <span class="md-ellipsis">
      Build and deploy a function within the VM
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#access-openfaas-edge-from-your-own-workstation" class="md-nav__link">
    <span class="md-ellipsis">
      Access OpenFaaS Edge from your own workstation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Access OpenFaaS Edge from your own workstation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#access-the-registry" class="md-nav__link">
    <span class="md-ellipsis">
      Access the registry
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_5" >
        
          
          <label class="md-nav__link" for="__nav_1_5" id="__nav_1_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Tasks
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5">
            <span class="md-nav__icon md-icon"></span>
            Tasks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/userdata/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Customise with userdata
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/copy-files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Copy files to/from a VM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/execute-commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Execute commands in a VM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/expose-ports/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Expose ports from a VM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/custom-image/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Build a custom root filesystem
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/monitoring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logs & Monitoring
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/share-files-with-nfs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Share files over NFS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/nested-virtualization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Nested Virtualization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/pvm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Run slicer without KVM on cloud VMs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/execute-commands-with-sdk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Execute commands in VMs with the SDK
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_6" >
        
          
          <label class="md-nav__link" for="__nav_1_6" id="__nav_1_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Storage
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6">
            <span class="md-nav__icon md-icon"></span>
            Storage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/zfs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ZFS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/devmapper/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Devmapper
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_7" >
        
          
          <label class="md-nav__link" for="__nav_1_7" id="__nav_1_7_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_7">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Slicer REST API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/images/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Images for microVMs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/ssh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SSH access to VMs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/secrets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Secret management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sos/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Serial Over SSH (SOS)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/networking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Networking
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/vfio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VFIO Passthrough
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Slicer for Mac
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Slicer for Mac
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mac/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mac/installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mac/linux-vm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux VM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mac/sandboxes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sandboxes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mac/rosetta/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Enable Rosetta
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mac/storage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Storage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mac/folder-sharing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Folder sharing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mac/docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mac/sleep/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sleep behavior
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mac/tray-integration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tray integration
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mac/coding-agents/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Coding agents
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#userdata" class="md-nav__link">
    <span class="md-ellipsis">
      Userdata
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vm-config" class="md-nav__link">
    <span class="md-ellipsis">
      VM config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-openfaas-edge" class="md-nav__link">
    <span class="md-ellipsis">
      Run OpenFaaS Edge
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-and-deploy-a-function-within-the-vm" class="md-nav__link">
    <span class="md-ellipsis">
      Build and deploy a function within the VM
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#access-openfaas-edge-from-your-own-workstation" class="md-nav__link">
    <span class="md-ellipsis">
      Access OpenFaaS Edge from your own workstation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Access OpenFaaS Edge from your own workstation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#access-the-registry" class="md-nav__link">
    <span class="md-ellipsis">
      Access the registry
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="openfaas-edge-in-slicer">OpenFaaS Edge in slicer<a class="headerlink" href="#openfaas-edge-in-slicer" title="Permanent link">&para;</a></h1>
<p>Follow this guide to setup a pre-configured microVM with <a href="https://docs.openfaas.com/edge/overview/">OpenFaas Edge</a> deployed along with the <a href="https://docs.openfaas.com/edge/builder/">OpenFaaS Function Builder API</a>.</p>
<p>After following the steps in this example you will be able to build and deploy functions to faasd directly from the VM or access the gateway and function builder from other machines by using the VM's IP.</p>
<h2 id="userdata">Userdata<a class="headerlink" href="#userdata" title="Permanent link">&para;</a></h2>
<p>Create <code>openfaas-edge.sh</code>.</p>
<p>By default the script installs OpenFaaS Edge a private registry and the <a href="https://docs.openfaas.com/edge/builder/">OpenFaaS Function Builder API</a> as additional services. Select which services to install by changing the environment variables in the script configuration section.</p>
<p>Available configuration options:</p>
<table>
<thead>
<tr>
<th>Env</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>INSTALL_REGISTRY</td>
<td>Install a private registry</td>
<td><code>true</code></td>
</tr>
<tr>
<td>INSTALL_BUILDER</td>
<td>Install the OpenFaaS Function Builder API</td>
<td><code>true</code></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">OpenfaaS Edge license</p>
<p>Slicer subcriptions or GitHub sponsorship does not include the function builder addon for OpenFaaS Edge.
A separate <a href="https://www.openfaas.com/pricing/">OpenFaaS Edge license</a> is required to use the function builder.</p>
</div>
<div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env bash</span>

<span class="c1">#==============================================================================</span>
<span class="c1"># OpenFaaS Edge Installation Script</span>
<span class="c1">#==============================================================================</span>
<span class="c1"># This script installs OpenFaaS Edge, including optional</span>
<span class="c1"># components like a private registry and function builder.</span>
<span class="c1">#==============================================================================</span>

<span class="nb">set</span><span class="w"> </span>-euxo<span class="w"> </span>pipefail

<span class="c1">#==============================================================================</span>
<span class="c1"># CONFIGURATION</span>
<span class="c1">#==============================================================================</span>

<span class="c1"># Install additional services (registry and function builder)</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">INSTALL_REGISTRY</span><span class="o">=</span><span class="nb">true</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">INSTALL_BUILDER</span><span class="o">=</span><span class="nb">true</span>

<span class="c1">#==============================================================================</span>
<span class="c1"># SYSTEM PREPARATION and OpenFaaS Edge Installation</span>
<span class="c1">#==============================================================================</span>

has_dnf<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="o">[</span><span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span><span class="nb">command</span><span class="w"> </span>-v<span class="w"> </span>dnf<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span>
<span class="o">}</span>

has_apt_get<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="o">[</span><span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span><span class="nb">command</span><span class="w"> </span>-v<span class="w"> </span>apt-get<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span>
<span class="o">}</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;==&gt; Configuring system packages and dependencies...&quot;</span>

<span class="k">if</span><span class="w"> </span><span class="k">$(</span>has_apt_get<span class="k">)</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">  </span><span class="nb">export</span><span class="w"> </span><span class="nv">HOME</span><span class="o">=</span>/home/ubuntu

<span class="w">  </span>sudo<span class="w"> </span>apt<span class="w"> </span>update<span class="w"> </span>-y

<span class="w">  </span><span class="c1"># Configure iptables-persistent to avoid interactive prompts</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span>iptables-persistent<span class="w"> </span>iptables-persistent/autosave_v4<span class="w"> </span>boolean<span class="w"> </span><span class="nb">false</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>debconf-set-selections
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span>iptables-persistent<span class="w"> </span>iptables-persistent/autosave_v6<span class="w"> </span>boolean<span class="w"> </span><span class="nb">false</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>debconf-set-selections

<span class="w">  </span>arkade<span class="w"> </span>oci<span class="w"> </span>install<span class="w"> </span>--path<span class="w"> </span>.<span class="w"> </span>ghcr.io/openfaasltd/faasd-pro-debian:latest
<span class="w">  </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>./openfaas-edge-*-amd64.deb<span class="w"> </span>--fix-broken<span class="w"> </span>-y

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">INSTALL_REGISTRY</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;true&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>apache2-utils<span class="w"> </span>-y
<span class="w">  </span><span class="k">fi</span>
<span class="k">elif</span><span class="w"> </span><span class="k">$(</span>has_dnf<span class="k">)</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">  </span><span class="nb">export</span><span class="w"> </span><span class="nv">HOME</span><span class="o">=</span>/home/slicer

<span class="w">  </span>arkade<span class="w"> </span>oci<span class="w"> </span>install<span class="w"> </span>--path<span class="w"> </span>.<span class="w"> </span>ghcr.io/openfaasltd/faasd-pro-rpm:latest
<span class="w">  </span>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>openfaas-edge-*.rpm<span class="w"> </span>-y


<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">INSTALL_REGISTRY</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;true&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>httpd-tools<span class="w"> </span>-y
<span class="w">  </span><span class="k">fi</span>
<span class="k">else</span>
<span class="w">    </span>fatal<span class="w"> </span><span class="s2">&quot;Could not find apt-get or dnf. Cannot install dependencies on this OS.&quot;</span>
<span class="w">    </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
<span class="k">fi</span>

<span class="c1"># Install faas-cli</span>
arkade<span class="w"> </span>get<span class="w"> </span>faas-cli<span class="w"> </span>--progress<span class="o">=</span><span class="nb">false</span><span class="w"> </span>--path<span class="o">=</span>/usr/local/bin/

<span class="c1"># Create the secrets directory and touch the license file</span>
sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/var/lib/faasd/secrets
touch<span class="w"> </span>/var/lib/faasd/secrets/openfaas_license

<span class="c1">#==============================================================================</span>
<span class="c1"># PRIVATE REGISTRY AND FUNCTION BUILDER SETUP</span>
<span class="c1">#==============================================================================</span>

<span class="c1"># Always install registry if builder is installed</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">INSTALL_BUILDER</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;true&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w"> </span><span class="nv">INSTALL_REGISTRY</span><span class="o">=</span><span class="nb">true</span>
<span class="k">fi</span>

<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">INSTALL_REGISTRY</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;true&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;==&gt; Setting up private container registry...&quot;</span>

<span class="w">    </span><span class="c1"># Generate registry authentication</span>
<span class="w">    </span><span class="nb">export</span><span class="w"> </span><span class="nv">PASSWORD</span><span class="o">=</span><span class="k">$(</span>openssl<span class="w"> </span>rand<span class="w"> </span>-base64<span class="w"> </span><span class="m">16</span><span class="k">)</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$PASSWORD</span><span class="w"> </span>&gt;<span class="w"> </span><span class="nv">$HOME</span>/registry-password.txt

<span class="w">    </span><span class="c1"># Create htpasswd file for registry authentication</span>
<span class="w">    </span>htpasswd<span class="w"> </span>-Bbc<span class="w"> </span><span class="nv">$HOME</span>/htpasswd<span class="w"> </span>faasd<span class="w"> </span><span class="nv">$PASSWORD</span>
<span class="w">    </span>sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/var/lib/faasd/registry/auth
<span class="w">    </span>sudo<span class="w"> </span>mv<span class="w"> </span><span class="nv">$HOME</span>/htpasswd<span class="w"> </span>/var/lib/faasd/registry/auth/htpasswd

<span class="w">    </span><span class="c1"># Create registry configuration</span>
<span class="w">    </span>sudo<span class="w"> </span>tee<span class="w"> </span>/var/lib/faasd/registry/config.yml<span class="w"> </span>&gt;<span class="w"> </span>/dev/null<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">version: 0.1</span>
<span class="s">log:</span>
<span class="s">  accesslog:</span>
<span class="s">    disabled: true</span>
<span class="s">  level: warn</span>
<span class="s">  formatter: text</span>

<span class="s">storage:</span>
<span class="s">  filesystem:</span>
<span class="s">    rootdirectory: /var/lib/registry</span>

<span class="s">auth:</span>
<span class="s">  htpasswd:</span>
<span class="s">    realm: basic-realm</span>
<span class="s">    path: /etc/registry/htpasswd</span>

<span class="s">http:</span>
<span class="s">  addr: 0.0.0.0:5000</span>
<span class="s">  relativeurls: false</span>
<span class="s">  draintimeout: 60s</span>
<span class="s">EOF</span>

<span class="w">    </span><span class="c1"># Configure registry authentication for faas-cli</span>
<span class="w">    </span>cat<span class="w"> </span><span class="nv">$HOME</span>/registry-password.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>faas-cli<span class="w"> </span>registry-login<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--server<span class="w"> </span>http://registry:5000<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--username<span class="w"> </span>faasd<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>--password-stdin

<span class="w">    </span><span class="c1"># Setup Docker credentials for faasd-provider</span>
<span class="w">    </span>sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/var/lib/faasd/.docker
<span class="w">    </span>sudo<span class="w"> </span>cp<span class="w"> </span>./credentials/config.json<span class="w"> </span>/var/lib/faasd/.docker/config.json

<span class="w">    </span><span class="c1"># Ensure pro-builder can access Docker credentials</span>
<span class="w">    </span>sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/var/lib/faasd/secrets
<span class="w">    </span>sudo<span class="w"> </span>cp<span class="w"> </span>./credentials/config.json<span class="w"> </span>/var/lib/faasd/secrets/docker-config

<span class="w">    </span><span class="c1"># Configure local registry hostname resolution</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;127.0.0.1 registry&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>-a<span class="w"> </span>/etc/hosts

<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;==&gt; Adding registry services to docker-compose...&quot;</span>

<span class="w">    </span><span class="c1"># Append additional services to docker-compose.yaml</span>
<span class="w">    </span>sudo<span class="w"> </span>tee<span class="w"> </span>-a<span class="w"> </span>/var/lib/faasd/docker-compose.yaml<span class="w"> </span>&gt;<span class="w"> </span>/dev/null<span class="w"> </span><span class="s">&lt;&lt;EOF</span>

<span class="s">  registry:</span>
<span class="s">    image: docker.io/library/registry:3</span>
<span class="s">    volumes:</span>
<span class="s">    - type: bind</span>
<span class="s">      source: ./registry/data</span>
<span class="s">      target: /var/lib/registry</span>
<span class="s">    - type: bind</span>
<span class="s">      source: ./registry/auth</span>
<span class="s">      target: /etc/registry/</span>
<span class="s">      read_only: true</span>
<span class="s">    - type: bind</span>
<span class="s">      source: ./registry/config.yml</span>
<span class="s">      target: /etc/docker/registry/config.yml</span>
<span class="s">      read_only: true</span>
<span class="s">    deploy:</span>
<span class="s">      replicas: 1</span>
<span class="s">    ports:</span>
<span class="s">      - &quot;5000:5000&quot;</span>
<span class="s">EOF</span>

<span class="k">fi</span>

<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">INSTALL_BUILDER</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;true&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;==&gt; Configuring function builder...&quot;</span>

<span class="w">    </span><span class="c1"># Generate payload secret for function builder</span>
<span class="w">    </span>openssl<span class="w"> </span>rand<span class="w"> </span>-base64<span class="w"> </span><span class="m">32</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/var/lib/faasd/secrets/payload-secret

<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;==&gt; Adding function builder services to docker-compose...&quot;</span>

<span class="w">    </span><span class="c1"># Append additional services to docker-compose.yaml</span>
<span class="w">    </span>sudo<span class="w"> </span>tee<span class="w"> </span>-a<span class="w"> </span>/var/lib/faasd/docker-compose.yaml<span class="w"> </span>&gt;<span class="w"> </span>/dev/null<span class="w"> </span><span class="s">&lt;&lt;EOF</span>

<span class="s">  pro-builder:</span>
<span class="s">    depends_on: [buildkit]</span>
<span class="s">    user: &quot;app&quot;</span>
<span class="s">    group_add: [&quot;1000&quot;]</span>
<span class="s">    restart: always</span>
<span class="s">    image: ghcr.io/openfaasltd/pro-builder:0.5.3</span>
<span class="s">    environment:</span>
<span class="s">      buildkit-workspace: /tmp/</span>
<span class="s">      enable_lchown: false</span>
<span class="s">      insecure: true</span>
<span class="s">      buildkit_url: unix:///home/app/.local/run/buildkit/buildkitd.sock</span>
<span class="s">      disable_hmac: false</span>
<span class="s">      # max_inflight: 10 # Uncomment to limit concurrent builds</span>
<span class="s">    command:</span>
<span class="s">     - &quot;./pro-builder&quot;</span>
<span class="s">     - &quot;-license-file=/run/secrets/openfaas-license&quot;</span>
<span class="s">    volumes:</span>
<span class="s">      - type: bind</span>
<span class="s">        source: ./secrets/payload-secret</span>
<span class="s">        target: /var/openfaas/secrets/payload-secret</span>
<span class="s">      - type: bind</span>
<span class="s">        source: ./secrets/openfaas_license</span>
<span class="s">        target: /run/secrets/openfaas-license</span>
<span class="s">      - type: bind</span>
<span class="s">        source: ./secrets/docker-config</span>
<span class="s">        target: /home/app/.docker/config.json</span>
<span class="s">      - type: bind</span>
<span class="s">        source: ./buildkit-rootless-run</span>
<span class="s">        target: /home/app/.local/run</span>
<span class="s">      - type: bind</span>
<span class="s">        source: ./buildkit-sock</span>
<span class="s">        target: /home/app/.local/run/buildkit</span>
<span class="s">    deploy:</span>
<span class="s">      replicas: 1</span>
<span class="s">    ports:</span>
<span class="s">     - &quot;8088:8080&quot;</span>

<span class="s">  buildkit:</span>
<span class="s">    restart: always</span>
<span class="s">    image: docker.io/moby/buildkit:v0.23.2-rootless</span>
<span class="s">    group_add: [&quot;2000&quot;]</span>
<span class="s">    user: &quot;1000:1000&quot;</span>
<span class="s">    cap_add:</span>
<span class="s">      - CAP_SETUID</span>
<span class="s">      - CAP_SETGID</span>
<span class="s">    command:</span>
<span class="s">    - rootlesskit</span>
<span class="s">    - buildkitd</span>
<span class="s">    - &quot;--addr&quot;</span>
<span class="s">    - unix:///home/user/.local/share/bksock/buildkitd.sock</span>
<span class="s">    - --oci-worker-no-process-sandbox</span>
<span class="s">    security_opt:</span>
<span class="s">    - no-new-privileges=false</span>
<span class="s">    - seccomp=unconfined        # Required for mount(2) syscall</span>
<span class="s">    volumes:</span>
<span class="s">      # Runtime directory for rootlesskit/buildkit socket</span>
<span class="s">      - ./buildkit-rootless-run:/home/user/.local/run</span>
<span class="s">      - /sys/fs/cgroup:/sys/fs/cgroup</span>
<span class="s">      # Persistent state and cache directories</span>
<span class="s">      - ./buildkit-rootless-state:/home/user/.local/share/buildkit</span>
<span class="s">      - ./buildkit-sock:/home/user/.local/share/bksock</span>
<span class="s">    environment:</span>
<span class="s">      XDG_RUNTIME_DIR: /home/user/.local/run</span>
<span class="s">      TZ: &quot;UTC&quot;</span>
<span class="s">      BUILDKIT_DEBUG: &quot;1&quot;         # Enable for debugging</span>
<span class="s">      BUILDKIT_EXPERIMENTAL: &quot;1&quot;  # Enable experimental features</span>
<span class="s">    deploy:</span>
<span class="s">      replicas: 1</span>
<span class="s">EOF</span>

<span class="k">fi</span>

<span class="c1">#==============================================================================</span>
<span class="c1"># INSTALLATION EXECUTION</span>
<span class="c1">#==============================================================================</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;==&gt; Installing faasd...&quot;</span>

<span class="c1"># Execute the installation</span>
sudo<span class="w"> </span>/usr/local/bin/faasd<span class="w"> </span>install

<span class="c1">#==============================================================================</span>
<span class="c1"># POST-INSTALLATION CONFIGURATION</span>
<span class="c1">#==============================================================================</span>

<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">INSTALL_BUILDER</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;true&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;==&gt; Configuring insecure registry access...&quot;</span>

<span class="w">    </span><span class="c1"># Configure faasd-provider to use insecure registry</span>
<span class="w">    </span>sudo<span class="w"> </span>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;/^ExecStart=/ s|$| --insecure-registry http://registry:5000|&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">        </span>/lib/systemd/system/faasd-provider.service

<span class="w">    </span><span class="c1"># Reload systemd and restart faasd-provider</span>
<span class="w">    </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>daemon-reload
<span class="w">    </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>faasd-provider
<span class="k">fi</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;==&gt; OpenFaaS Edge installation completed successfully!&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;1. Access the OpenFaaS gateway at http://localhost:8080&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;2. Get your admin password: sudo cat /var/lib/faasd/secrets/basic-auth-password&quot;</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">INSTALL_REGISTRY</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;true&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;3. Private registry available at http://localhost:5000&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;4. Registry password: cat </span><span class="nv">$HOME</span><span class="s2">/registry-password.txt&quot;</span>
<span class="k">fi</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">INSTALL_BUILDER</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;true&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;5. Pro-builder service available at http://localhost:8088&quot;</span>
<span class="k">fi</span>
</code></pre></div>
<h2 id="vm-config">VM config<a class="headerlink" href="#vm-config" title="Permanent link">&para;</a></h2>
<p>Use <code>slicer new</code> to generate a configuration file:</p>
<p><div class="highlight"><pre><span></span><code>slicer<span class="w"> </span>new<span class="w"> </span>of-edge<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--userdata-file<span class="w"> </span>./openfaas-edge.sh<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>&gt;<span class="w"> </span>openfaas-edge.yaml
</code></pre></div>
The slicer config will be adapted from the <a href="/getting-started/walkthrough">walkthrough</a>. When you create the YAML, name it <code>openfaas-edge.yaml</code>.</p>
<p>Optionally use  the <code>--ssh-key</code> or <code>--github</code> flags to add an additional ssh key so you can connect via SSH to deploy functions, review the logs, and access check the status of the faasd services.</p>
<p>The userdate script provided in this guide can be used with both Ubuntu and Rocky Linux. You can change user the <code>--image</code> flag to swith the image to your preferred OS. An overview of the available images can be found <a href="/reference/images/">here</a>.</p>
<h2 id="run-openfaas-edge">Run OpenFaaS Edge<a class="headerlink" href="#run-openfaas-edge" title="Permanent link">&para;</a></h2>
<p>Start the VM:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>slicer<span class="w"> </span>up<span class="w"> </span>./openfaas-edge.yaml
</code></pre></div>
<p>Login to the VM and activate faasd using a static license key are by running faasd activate.</p>
<p>Users with a paid OpenFaaS Edge entitlement can create their license key as follows:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>nano<span class="w"> </span>/var/lib/faasd/secrets/openfaas_license
</code></pre></div>
<p>For personal use, GitHub Sponsors of @openfaas can run:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>faasd<span class="w"> </span>github<span class="w"> </span>login
sudo<span class="w"> </span>faasd<span class="w"> </span>activate
</code></pre></div>
<p>Restart faasd and the faad-provider after adding the license key:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>faasd<span class="w"> </span>faasd-provider
</code></pre></div>
<h2 id="build-and-deploy-a-function-within-the-vm">Build and deploy a function within the VM<a class="headerlink" href="#build-and-deploy-a-function-within-the-vm" title="Permanent link">&para;</a></h2>
<p>Login in to the VM over ssh to perform a test build on the VM directly.</p>
<p>Once you connected to the VM authenticate the faas-cli for gateway access:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>cat<span class="w"> </span><span class="s2">&quot;/var/lib/faasd/secrets/basic-auth-password&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w"> </span><span class="p">|</span><span class="w"> </span>faas-cli<span class="w"> </span>login<span class="w"> </span>--password-stdin
</code></pre></div>
<p>Scaffold a new function for testing:</p>
<div class="highlight"><pre><span></span><code>faas-cli<span class="w"> </span>new<span class="w"> </span>--lang<span class="w"> </span>python3-http<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--prefix<span class="w"> </span>registry:5000/functions<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>pytest
</code></pre></div>
<p>The <code>--prefix</code> flag is used to set prefix for the function image to our local registry.</p>
<p>Build the function using the function builder API and deploy it:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Get the payload secret</span>
sudo<span class="w"> </span>cp<span class="w"> </span>/var/lib/faasd/secrets/payload-secret<span class="w"> </span>./payload-secret

faas-cli<span class="w"> </span>up<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--remote-builder<span class="w"> </span>http://127.0.0.1:8088<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--payload-secret<span class="w"> </span>./payload-secret<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--tag<span class="o">=</span>digest
</code></pre></div>
<h2 id="access-openfaas-edge-from-your-own-workstation">Access OpenFaaS Edge from your own workstation<a class="headerlink" href="#access-openfaas-edge-from-your-own-workstation" title="Permanent link">&para;</a></h2>
<p>Get the basic auth password from the VM and login with the faas-cli:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">OPENFAAS_URL</span><span class="o">=</span>http://192.168.137.2:8080
ssh<span class="w"> </span>ubuntu@192.168.137.2<span class="w"> </span><span class="s2">&quot;sudo cat /var/lib/faasd/secrets/basic-auth-password&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w"> </span><span class="p">|</span><span class="w"> </span>faas-cli<span class="w"> </span>login<span class="w"> </span>--password-stdin
</code></pre></div>
<p>Note that the <code>OPENFAAS_URL</code> is configured to use the VM's IP address.</p>
<p>Deploy a function form the function store:</p>
<div class="highlight"><pre><span></span><code>faas-cli<span class="w"> </span>store<span class="w"> </span>deploy<span class="w"> </span>nodeinfo
</code></pre></div>
<p>Invoke the nodeinfo function:</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-s<span class="w"> </span>http://192.168.137.2:8080/function/nodeinfo
</code></pre></div>
<p>If you have the function builder installed you can build and deploy a function using the function builder API:</p>
<p>Scaffold a new function for testing:</p>
<div class="highlight"><pre><span></span><code>faas-cli<span class="w"> </span>new<span class="w"> </span>--lang<span class="w"> </span>python3-http<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--prefix<span class="w"> </span>registry:5000/functions<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>pytest
</code></pre></div>
<p>The <code>--prefix</code> flag is used to set the prefix for the function image to our local registry deployed on the VM.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Get the payload secret from the VM</span>
ssh<span class="w"> </span>ubuntu@192.168.137.2<span class="w"> </span><span class="s2">&quot;sudo cat /var/lib/faasd/secrets/payload-secret&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>./payload-secret

faas-cli<span class="w"> </span>up<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--remote-builder<span class="w"> </span>http://192.168.137.2:8088<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--payload-secret<span class="w"> </span>./payload-secret<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--tag<span class="o">=</span>digest
</code></pre></div>
<p>The <code>--remote-builder</code> flag points to the Function Builder API exposed on the VM.</p>
<p>Test the new function:</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-s<span class="w"> </span>http://192.168.137.2:8080/function/pytest
</code></pre></div>
<h3 id="access-the-registry">Access the registry<a class="headerlink" href="#access-the-registry" title="Permanent link">&para;</a></h3>
<p>The be able to push and pull function from the image registry directly you need to add the VM IP address to your hosts file and login with docker.</p>
<p>Add a new entry to your hosts file that points to the registry:</p>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;192.168.137.2 registry&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>-a<span class="w"> </span>/etc/hosts
</code></pre></div>
<p>The registry has to be added as an insecure registry in the docker daemon configuration file, <code>/etc/docker/daemon.json</code>:</p>
<div class="highlight"><pre><span></span><code><span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;insecure-registries&quot;</span>:<span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;registry:5000&quot;</span><span class="w"> </span><span class="o">]</span>
<span class="o">}</span>
</code></pre></div>
<p>Get get the registry password from the VM and login with docker:</p>
<div class="highlight"><pre><span></span><code>ssh<span class="w"> </span>ubuntu@192.168.137.2<span class="w"> </span><span class="s2">&quot;sudo cat ./registry-password.txt&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>./registry-password.txt
cat<span class="w"> </span>registry-password.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>docker<span class="w"> </span>login<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--username<span class="w"> </span>faasd<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--password-stdin<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>http://registry:5000
</code></pre></div>
<p>You should now be able to push and pull images from the registry.</p>
<p>You can try this by building a function on your workstation and pushing it to the registry. M</p>
<div class="highlight"><pre><span></span><code>faas-cli<span class="w"> </span>new<span class="w"> </span>--lang<span class="w"> </span>node22<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--prefix<span class="w"> </span>registry:5000/functions<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--append<span class="w"> </span>stack.yaml<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>nodetest

faas-cli<span class="w"> </span>up
</code></pre></div>
<p>Test the new function:</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-s<span class="w"> </span>http://192.168.137.2:8080/function/nodetest<span class="w"> </span>-d<span class="w"> </span><span class="s2">&quot;Hello World&quot;</span>
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 OpenFaaS Ltd

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/self-actuated/" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/selfactuated" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
    
  </body>
</html>