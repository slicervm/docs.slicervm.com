
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Slice bare-metal into sandboxes and services">
      
      
        <meta name="author" content="OpenFaaS Ltd">
      
      
        <link rel="canonical" href="https://docs.slicervm.com/examples/router-firewall/">
      
      
        <link rel="prev" href="../jenkins/">
      
      
        <link rel="next" href="../docker/">
      
      
      <link rel="icon" href="../../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>Create a Linux Router/Firewall - Slicer</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.bcfcd587.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto,+Helvetica:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto, Helvetica";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#create-a-linux-routerfirewall-with-slicer" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Slicer" class="md-header__button md-logo" aria-label="Slicer" data-md-component="logo">
      
  <img src="../../images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Slicer
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Create a Linux Router/Firewall
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/slicervm/docs.slicervm.com" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    slicervm/docs.slicervm.com
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../.." class="md-tabs__link">
          
  
  Slicer for Linux

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../mac/overview/" class="md-tabs__link">
          
  
  Slicer for Mac

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Slicer" class="md-nav__button md-logo" aria-label="Slicer" data-md-component="logo">
      
  <img src="../../images/logo.png" alt="logo">

    </a>
    Slicer
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/slicervm/docs.slicervm.com" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    slicervm/docs.slicervm.com
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Slicer for Linux
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Slicer for Linux
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contact/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contact us
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_3" >
        
          
          <label class="md-nav__link" for="__nav_1_3" id="__nav_1_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_3">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/walkthrough/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Walkthrough
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/daemon/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running in the background
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4" checked>
        
          
          <label class="md-nav__link" for="__nav_1_4" id="__nav_1_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_4">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../run-a-task/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Run a one-shot task via API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_4_2" >
        
          
          <label class="md-nav__link" for="__nav_1_4_2" id="__nav_1_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Kubernetes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4_2">
            <span class="md-nav__icon md-icon"></span>
            Kubernetes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ha-k3s/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HA Kubernetes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../autoscaling-k3s/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Autoscaling Kubernetes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../large-scale-k3s/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Large scale Kubernetes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../multiple-machine-k3s/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multiple machine Kubernetes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k3s-gpu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    K3s with a GPU
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../openfaas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenFaaS on K3s
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_4_3" >
        
          
          <label class="md-nav__link" for="__nav_1_4_3" id="__nav_1_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    AI/LLMs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4_3">
            <span class="md-nav__icon md-icon"></span>
            AI/LLMs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gpu-ollama/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ollama with a GPU
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../opencode-agent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Headless OpenCode Coding Agent
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cursor-cli-agent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Headless Cursor Coding Agent
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_4_4" >
        
          
          <label class="md-nav__link" for="__nav_1_4_4" id="__nav_1_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Productivity
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4_4">
            <span class="md-nav__icon md-icon"></span>
            Productivity
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../buildkit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Remote Docker builds over SSH
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../remote-vscode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Remote VSCode
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pihole-adblock/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PiHole Adblocker
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../jenkins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Run Jenkins for CI/CD
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Create a Linux Router/Firewall
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Create a Linux Router/Firewall
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#network-topology" class="md-nav__link">
    <span class="md-ellipsis">
      Network Topology
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bind-a-pci-network-adapter-to-vfio" class="md-nav__link">
    <span class="md-ellipsis">
      Bind a PCI network adapter to VFIO
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-up-the-microvm" class="md-nav__link">
    <span class="md-ellipsis">
      Set up the microVM
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-a-raspberry-pi-to-run-on-lan2" class="md-nav__link">
    <span class="md-ellipsis">
      Configure a Raspberry Pi to run on LAN2
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#access-the-raspberry-pi" class="md-nav__link">
    <span class="md-ellipsis">
      Access the Raspberry Pi
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#block-access-to-your-main-network" class="md-nav__link">
    <span class="md-ellipsis">
      Block access to your main network
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wrapping-up" class="md-nav__link">
    <span class="md-ellipsis">
      Wrapping up
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Run containers with Docker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../openfaas-edge/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenFaaS Edge (All-In-One)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_5" >
        
          
          <label class="md-nav__link" for="__nav_1_5" id="__nav_1_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Tasks
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5">
            <span class="md-nav__icon md-icon"></span>
            Tasks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/userdata/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Customise with userdata
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/copy-files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Copy files to/from a VM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/execute-commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Execute commands in a VM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/expose-ports/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Expose ports from a VM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/custom-image/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Build a custom root filesystem
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/monitoring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logs & Monitoring
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/share-files-with-nfs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Share files over NFS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/nested-virtualization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Nested Virtualization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/pvm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Run slicer without KVM on cloud VMs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tasks/execute-commands-with-sdk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Execute commands in VMs with the SDK
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_6" >
        
          
          <label class="md-nav__link" for="__nav_1_6" id="__nav_1_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Storage
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6">
            <span class="md-nav__icon md-icon"></span>
            Storage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/zfs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ZFS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/devmapper/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Devmapper
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_7" >
        
          
          <label class="md-nav__link" for="__nav_1_7" id="__nav_1_7_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_7">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Slicer REST API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/images/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Images for microVMs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/ssh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SSH access to VMs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/secrets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Secret management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sos/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Serial Over SSH (SOS)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/networking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Networking
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/vfio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VFIO Passthrough
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Slicer for Mac
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Slicer for Mac
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mac/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mac/installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mac/linux-vm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux VM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mac/sandboxes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sandboxes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mac/rosetta/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Enable Rosetta
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mac/storage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Storage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mac/folder-sharing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Folder sharing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mac/docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mac/sleep/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sleep behavior
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mac/tray-integration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tray integration
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mac/coding-agents/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Coding agents
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#network-topology" class="md-nav__link">
    <span class="md-ellipsis">
      Network Topology
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bind-a-pci-network-adapter-to-vfio" class="md-nav__link">
    <span class="md-ellipsis">
      Bind a PCI network adapter to VFIO
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-up-the-microvm" class="md-nav__link">
    <span class="md-ellipsis">
      Set up the microVM
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-a-raspberry-pi-to-run-on-lan2" class="md-nav__link">
    <span class="md-ellipsis">
      Configure a Raspberry Pi to run on LAN2
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#access-the-raspberry-pi" class="md-nav__link">
    <span class="md-ellipsis">
      Access the Raspberry Pi
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#block-access-to-your-main-network" class="md-nav__link">
    <span class="md-ellipsis">
      Block access to your main network
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wrapping-up" class="md-nav__link">
    <span class="md-ellipsis">
      Wrapping up
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="create-a-linux-routerfirewall-with-slicer">Create a Linux Router/Firewall with Slicer<a class="headerlink" href="#create-a-linux-routerfirewall-with-slicer" title="Permanent link">&para;</a></h1>
<p>In this example, we'll turn a regular PC into a router/firewall with standard Linux networking daemons such as dnsmasq and iptables.</p>
<p><strong>Why use a regular Linux VM over a product like pfSense, or OPNsense?</strong></p>
<p>Whether it's based upon FreeBSD or Linux, these products are often extremely bloated, often closed source, and require a lot of resources to run. It's hard to know where to start when you need to customise these products to your own needs, and they often bundle far more than you need for a router/firewall.</p>
<p>Instead, we'll use a microVM that's easy to create from scratch, and can be customised as much as you need. You can then add in additional daemons or services as required like a VPN uplink, Inlets tunnels, or something like PiHole for ad blocking.</p>
<p>Most importantly, you'll be in control, you'll know exactly what is and what is not running in your appliance, and how to troubleshoot it or customise it - an LLM agent can help you with that if you're not used to Linux networking.</p>
<p><strong>And why Slicer?</strong></p>
<p>Well instead of having to flash an ISO directly to your main drive, you can run as many microVMs as you want, each performing a different task or role. One common complaint with off the shelf router/firewall products is their poor support for Linux containers. With Slicer, you can simply run an extra microVM, you're not locked into one OS or product for the whole machine.</p>
<h2 id="network-topology">Network Topology<a class="headerlink" href="#network-topology" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>                    ┌─────────────────────────────────┐
                    │           Slicer Host           │
                    │                                 │
                    │  ┌──────────────────────────┐   │
                    │  │  microVM Router/Firewall │   │
                    │  │                          │   │
                    │  │  eth0: 192.168.130.2/24  │   │
                    │  │  ──────────────────────  │   │
                    │  │                          │   │
                    │  │  ens7: 10.88.0.1/24      │   │
                    │  │  (PCI Passthrough/VFIO)  │   │
                    │  └──────────────────────────┘   │
                    │           │                     │
                    │           │ PCI Passthrough     │
                    │           │ (VFIO)              │
                    └───────────┼─────────────────────┘
                                │
                    ┌───────────┴───────────┐
                    │                       │
                    │                       │
         ┌──────────▼───────────┐ ┌─────────▼────────┐
         │       LAN1           │ │       LAN2       │
         │  (Main Network)      │ │  (Isolated)      │
         │  192.168.130.0/24    │ │  10.88.0.0/24    │
         │                      │ │                  │
         │  ┌────────────────┐  │ │  ┌─────────────┐ │
         │  │  Other Devices │  │ │  │ Raspberry Pi│ │
         │  │  (LAN1)        │  │ │  │ (LAN2)      │ │
         │  └────────────────┘  │ │  └─────────────┘ │
         │                      │ │                  │
         │  Internet Gateway    │ │  DHCP/DNS        │
         │  Router              │ │  via dnsmasq     │
         └──────────────────────┘ └──────────────────┘
</code></pre></div>
<p>The microVM router has two network interfaces:</p>
<ul>
<li><strong>eth0</strong>: Connected to LAN1 (192.168.130.0/24) via bridge networking</li>
<li><strong>ens7</strong>: Connected to LAN2 (10.88.0.0/24) via PCI passthrough (VFIO)</li>
</ul>
<p>All traffic from LAN2 must pass through the microVM router to reach LAN1 or the Internet, providing physical Layer 1 separation between the networks.</p>
<p><a href="/images/router/n100-port4.jpg"><img alt="N100 mini PC routing/firewalling a separate Internal network" src="/images/router/n100-port4.jpg" /></a></p>
<blockquote>
<p>N100 mini PC routing/firewalling a separate Internal network</p>
</blockquote>
<p>You will have physical L1 (OSI) separation between the main LAN1 and a separate LAN2.</p>
<p>The LAN1 in this case will be your main network, which is plugged directly into the Slicer host.</p>
<p>The LAN2 will be a separate network plugged into its own switch, WiFi access point, or an Ethernet port on another device.</p>
<p>For this example, we'll use the microVM to create an isolated physical network for a Raspberry Pi, with a separate IP range than the main network LAN1.</p>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<p>Whilst I'm using a Raspberry Pi for the LAN2 network, you can use any device that supports standard Linux networking daemons.</p>
<h2 id="bind-a-pci-network-adapter-to-vfio">Bind a PCI network adapter to VFIO<a class="headerlink" href="#bind-a-pci-network-adapter-to-vfio" title="Permanent link">&para;</a></h2>
<p>You'll need to follow the instructions on the <a href="/reference/vfio">PCI Passthrough</a> page to bind a PCI network adapter to VFIO.</p>
<p>You'll be able to identify which network adapters are available, and are part of their own IOMMU group.</p>
<p>In the case of the N100 mini PC being used here, the PCI address is <code>0000:04:00.0</code>, which can also be written in short form as <code>04:00.0</code>.</p>
<p>Take note of this address and use it in the config file in the next step. </p>
<h2 id="set-up-the-microvm">Set up the microVM<a class="headerlink" href="#set-up-the-microvm" title="Permanent link">&para;</a></h2>
<p>Create a new Slicer config file, and add in the PCI address of the network adapter you bound to VFIO:</p>
<div class="highlight"><pre><span></span><code><span class="nt">config</span><span class="p">:</span>
<span class="w">  </span><span class="nt">pci</span><span class="p">:</span>
<span class="w">    </span><span class="nt">router-1</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;0000:04:00.0&quot;</span><span class="p p-Indicator">]</span>

<span class="w">  </span><span class="nt">host_groups</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">router</span>
<span class="w">      </span><span class="nt">userdata_file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./userdata.sh</span>
<span class="w">      </span><span class="nt">storage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">image</span>
<span class="w">      </span><span class="nt">storage_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25G</span>
<span class="w">      </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">      </span><span class="nt">vcpu</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">      </span><span class="nt">ram_gb</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="w">      </span><span class="nt">network</span><span class="p">:</span>
<span class="w">        </span><span class="nt">bridge</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">brrouter0</span>
<span class="w">        </span><span class="nt">tap_prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">router</span>
<span class="w">        </span><span class="nt">gateway</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.168.130.1/24</span>
<span class="w">  </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ghcr.io/openfaasltd/slicer-systemd-ch:x86_64-latest&quot;</span>
<span class="w">  </span><span class="nt">hypervisor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cloud-hypervisor</span>

<span class="w">  </span><span class="nt">api</span><span class="p">:</span>
<span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<span class="w">    </span><span class="nt">bind_address</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;127.0.0.1&quot;</span>
<span class="w">    </span><span class="nt">auth</span><span class="p">:</span>
<span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">ssh</span><span class="p">:</span>
<span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
</code></pre></div>
<p>This configures Slicer to create a single microVM with 2 vCPUs and 4GB of RAM.</p>
<p>We now need to find out the stable name of the network adapter when it's passed through via VFIO into the microVM.</p>
<p>Create a userdata file for the initial boot which will log the network adapters to the serial console log file:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>&gt;&gt;<span class="w"> </span>userdata.sh<span class="w"> </span><span class="s">&lt;&lt; EOF</span>
<span class="s">#!/bin/bash</span>

<span class="s">ip link show</span>

<span class="s">lspci</span>

<span class="s">EOF</span>
</code></pre></div>
<p>Then, boot up the microVM, then check the logs for the stable name of the network adapter:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>slicer<span class="w"> </span>up<span class="w"> </span>./router.yaml
</code></pre></div>
<p>Once booted, review the log file for the microVM, the userdata script will output to the console:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>/var/log/slicer/router-1.txt
</code></pre></div>
<p>The following output came from the N100 being used in this example:</p>
<div class="highlight"><pre><span></span><code><span class="m">1</span>:<span class="w"> </span>lo:<span class="w"> </span>&lt;LOOPBACK,UP,LOWER_UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">65536</span><span class="w"> </span>qdisc<span class="w"> </span>noqueue<span class="w"> </span>state<span class="w"> </span>UNKNOWN<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">1000</span>
<span class="w">    </span>link/loopback<span class="w"> </span><span class="m">00</span>:00:00:00:00:00<span class="w"> </span>brd<span class="w"> </span><span class="m">00</span>:00:00:00:00:00
<span class="w">    </span>inet<span class="w"> </span><span class="m">127</span>.0.0.1/8<span class="w"> </span>scope<span class="w"> </span>host<span class="w"> </span>lo
<span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<span class="w">    </span>inet6<span class="w"> </span>::1/128<span class="w"> </span>scope<span class="w"> </span>host<span class="w"> </span>
<span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<span class="m">2</span>:<span class="w"> </span>eth0:<span class="w"> </span>&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>pfifo_fast<span class="w"> </span>state<span class="w"> </span>UP<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">1000</span>
<span class="w">    </span>link/ether<span class="w"> </span>2e:31:2a:ff:7d:45<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff
<span class="w">    </span>altname<span class="w"> </span>enp0s4
<span class="w">    </span>altname<span class="w"> </span>ens4
<span class="w">    </span>inet<span class="w"> </span><span class="m">192</span>.168.130.2/24<span class="w"> </span>brd<span class="w"> </span><span class="m">192</span>.168.130.255<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span>eth0
<span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<span class="w">    </span>inet6<span class="w"> </span>fe80::2c31:2aff:feff:7d45/64<span class="w"> </span>scope<span class="w"> </span>link<span class="w"> </span>
<span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<span class="m">3</span>:<span class="w"> </span>ens7:<span class="w"> </span>&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>mq<span class="w"> </span>state<span class="w"> </span>UP<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">1000</span>
<span class="w">    </span>link/ether<span class="w"> </span><span class="m">60</span>:be:b4:1e:19:63<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff
<span class="w">    </span>altname<span class="w"> </span>enp0s7
<span class="w">    </span>inet<span class="w"> </span><span class="m">10</span>.88.0.1/24<span class="w"> </span>scope<span class="w"> </span>global<span class="w"> </span>ens7
<span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
<span class="w">    </span>inet6<span class="w"> </span>fe80::62be:b4ff:fe1e:1963/64<span class="w"> </span>scope<span class="w"> </span>link<span class="w"> </span>
<span class="w">       </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
</code></pre></div>
<p><code>lo</code> and <code>eth0</code> are standard and available for all microVMs, so look a different one i.e. <code>ens7</code> in this case.</p>
<p>Hit Control-C to stop the microVM, then run <code>sudo rm -rf *.img</code> to remove the storage image.</p>
<p>Create a userdata script to configure the router daemons.</p>
<p>Edit <code>ens7</code> and <code>enp0s7</code> to match the values show in the output of the <code>ip addr show</code> command run above.</p>
<p><em>userdata.sh</em></p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env bash</span>
<span class="nb">set</span><span class="w"> </span>-euo<span class="w"> </span>pipefail
log<span class="o">(){</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;[router-setup] </span><span class="nv">$*</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="o">}</span>

<span class="nv">WAN_IF</span><span class="o">=</span><span class="s2">&quot;eth0&quot;</span>
<span class="nv">LAN_IF</span><span class="o">=</span><span class="s2">&quot;ens7&quot;</span>

<span class="nv">LAN_IP</span><span class="o">=</span><span class="s2">&quot;10.88.0.1&quot;</span>
<span class="nv">LAN_CIDR</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">LAN_IP</span><span class="si">}</span><span class="s2">/24&quot;</span>
<span class="nv">LAN_NET</span><span class="o">=</span><span class="s2">&quot;10.88.0.0/24&quot;</span>

<span class="nv">DHCP_START</span><span class="o">=</span><span class="s2">&quot;10.88.0.50&quot;</span>
<span class="nv">DHCP_END</span><span class="o">=</span><span class="s2">&quot;10.88.0.200&quot;</span>

<span class="nv">UP_DNS1</span><span class="o">=</span><span class="s2">&quot;1.1.1.1&quot;</span>
<span class="nv">UP_DNS2</span><span class="o">=</span><span class="s2">&quot;8.8.8.8&quot;</span>

<span class="nb">export</span><span class="w"> </span><span class="nv">DEBIAN_FRONTEND</span><span class="o">=</span>noninteractive

<span class="k">if</span><span class="w"> </span>!<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span>show<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">LAN_IF</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span>&gt;/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">  </span>log<span class="w"> </span><span class="s2">&quot;ERROR: </span><span class="si">${</span><span class="nv">LAN_IF</span><span class="si">}</span><span class="s2"> not found. Run: ip -br link&quot;</span>
<span class="w">  </span>ip<span class="w"> </span>-br<span class="w"> </span>link<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">true</span>
<span class="w">  </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
<span class="k">fi</span>

log<span class="w"> </span><span class="s2">&quot;Installing packages&quot;</span>
apt-get<span class="w"> </span>update<span class="w"> </span>-y
<span class="nb">echo</span><span class="w"> </span>iptables-persistent<span class="w"> </span>iptables-persistent/autosave_v4<span class="w"> </span>boolean<span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>debconf-set-selections<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">true</span>
<span class="nb">echo</span><span class="w"> </span>iptables-persistent<span class="w"> </span>iptables-persistent/autosave_v6<span class="w"> </span>boolean<span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>debconf-set-selections<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">true</span>
apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>dnsmasq<span class="w"> </span>iptables<span class="w"> </span>iptables-persistent<span class="w"> </span>nmap

log<span class="w"> </span><span class="s2">&quot;Configuring systemd-networkd for </span><span class="si">${</span><span class="nv">LAN_IF</span><span class="si">}</span><span class="s2">=</span><span class="si">${</span><span class="nv">LAN_CIDR</span><span class="si">}</span><span class="s2"> (eth0 untouched)&quot;</span>
mkdir<span class="w"> </span>-p<span class="w"> </span>/etc/systemd/network
cat<span class="w"> </span>&gt;/etc/systemd/network/10-lan-<span class="si">${</span><span class="nv">LAN_IF</span><span class="si">}</span>.network<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">[Match]</span>
<span class="s">Name=${LAN_IF}</span>

<span class="s">[Link]</span>
<span class="s">RequiredForOnline=no</span>

<span class="s">[Network]</span>
<span class="s">Address=${LAN_CIDR}</span>
<span class="s">ConfigureWithoutCarrier=yes</span>
<span class="s">IPv6AcceptRA=no</span>
<span class="s">EOF</span>

systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>systemd-networkd
systemctl<span class="w"> </span>restart<span class="w"> </span>systemd-networkd
networkctl<span class="w"> </span>reconfigure<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">LAN_IF</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">true</span>
ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">LAN_IF</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span>up<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">true</span>

log<span class="w"> </span><span class="s2">&quot;Enable IPv4 forwarding (set only what we need; avoid sysctl --system noise)&quot;</span>
cat<span class="w"> </span>&gt;/etc/sysctl.d/99-router.conf<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">net.ipv4.ip_forward=1</span>
<span class="s">EOF</span>
sysctl<span class="w"> </span>-w<span class="w"> </span>net.ipv4.ip_forward<span class="o">=</span><span class="m">1</span><span class="w"> </span>&gt;/dev/null<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">true</span>

log<span class="w"> </span><span class="s2">&quot;Configuring dnsmasq (LAN only, resilient bind)&quot;</span>
mkdir<span class="w"> </span>-p<span class="w"> </span>/etc/dnsmasq.d
cat<span class="w"> </span>&gt;/etc/dnsmasq.d/pi-lan.conf<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s"># Only serve on LAN</span>
<span class="s">interface=${LAN_IF}</span>
<span class="s">except-interface=${WAN_IF}</span>
<span class="s">except-interface=lo</span>

<span class="s"># Resilient bind: don&#39;t fail if IP isn&#39;t present yet; rebind when it appears</span>
<span class="s">bind-dynamic</span>

<span class="s"># DHCP scope</span>
<span class="s">dhcp-range=${DHCP_START},${DHCP_END},255.255.255.0,12h</span>
<span class="s">dhcp-option=option:router,${LAN_IP}</span>
<span class="s">dhcp-option=option:dns-server,${LAN_IP}</span>

<span class="s"># DNS forwarding upstream</span>
<span class="s">no-resolv</span>
<span class="s">server=${UP_DNS1}</span>
<span class="s">server=${UP_DNS2}</span>

<span class="s"># Debug</span>
<span class="s">log-dhcp</span>
<span class="s">log-queries</span>
<span class="s">EOF</span>

<span class="c1"># Don&#39;t rely on apt auto-start (policy-rc.d may block it)</span>
systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>dnsmasq<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">true</span>

log<span class="w"> </span><span class="s2">&quot;Writing router defaults&quot;</span>
cat<span class="w"> </span>&gt;/etc/default/router-apply<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">WAN_IF=${WAN_IF}</span>
<span class="s">LAN_IF=${LAN_IF}</span>
<span class="s">LAN_NET=${LAN_NET}</span>
<span class="s">EOF</span>
chmod<span class="w"> </span><span class="m">0644</span><span class="w"> </span>/etc/default/router-apply

log<span class="w"> </span><span class="s2">&quot;Writing router runtime apply script (runs every boot)&quot;</span>
cat<span class="w"> </span>&gt;/usr/local/sbin/router-apply.sh<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39;</span>
<span class="s">#!/usr/bin/env bash</span>
<span class="s">set -euo pipefail</span>
<span class="s">log(){ echo &quot;[router-apply] $*&quot;; }</span>

<span class="s"># shellcheck disable=SC1091</span>
<span class="s">source /etc/default/router-apply</span>

<span class="s">: &quot;${WAN_IF:?missing WAN_IF}&quot;</span>
<span class="s">: &quot;${LAN_IF:?missing LAN_IF}&quot;</span>
<span class="s">: &quot;${LAN_NET:?missing LAN_NET}&quot;</span>

<span class="s">ip link set &quot;${LAN_IF}&quot; up || true</span>

<span class="s">iptables -C INPUT -i &quot;${LAN_IF}&quot; -p udp --dport 67 -j ACCEPT 2&gt;/dev/null || \</span>
<span class="s">  iptables -A INPUT -i &quot;${LAN_IF}&quot; -p udp --dport 67 -j ACCEPT</span>
<span class="s">iptables -C INPUT -i &quot;${LAN_IF}&quot; -p udp --dport 53 -j ACCEPT 2&gt;/dev/null || \</span>
<span class="s">  iptables -A INPUT -i &quot;${LAN_IF}&quot; -p udp --dport 53 -j ACCEPT</span>
<span class="s">iptables -C INPUT -i &quot;${LAN_IF}&quot; -p tcp --dport 53 -j ACCEPT 2&gt;/dev/null || \</span>
<span class="s">  iptables -A INPUT -i &quot;${LAN_IF}&quot; -p tcp --dport 53 -j ACCEPT</span>

<span class="s">iptables -C FORWARD -i &quot;${LAN_IF}&quot; -o &quot;${WAN_IF}&quot; -s &quot;${LAN_NET}&quot; -j ACCEPT 2&gt;/dev/null || \</span>
<span class="s">  iptables -A FORWARD -i &quot;${LAN_IF}&quot; -o &quot;${WAN_IF}&quot; -s &quot;${LAN_NET}&quot; -j ACCEPT</span>
<span class="s">iptables -C FORWARD -i &quot;${WAN_IF}&quot; -o &quot;${LAN_IF}&quot; -d &quot;${LAN_NET}&quot; -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT 2&gt;/dev/null || \</span>
<span class="s">  iptables -A FORWARD -i &quot;${WAN_IF}&quot; -o &quot;${LAN_IF}&quot; -d &quot;${LAN_NET}&quot; -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT</span>

<span class="s">iptables -t nat -C POSTROUTING -o &quot;${WAN_IF}&quot; -s &quot;${LAN_NET}&quot; -j MASQUERADE 2&gt;/dev/null || \</span>
<span class="s">  iptables -t nat -A POSTROUTING -o &quot;${WAN_IF}&quot; -s &quot;${LAN_NET}&quot; -j MASQUERADE</span>

<span class="s">iptables-save &gt; /etc/iptables/rules.v4</span>
<span class="s">ip6tables-save &gt; /etc/iptables/rules.v6</span>

<span class="s"># Start/restart dnsmasq now that interface/address is ready</span>
<span class="s">systemctl restart dnsmasq || true</span>

<span class="s">log &quot;Applied.&quot;</span>
<span class="s">EOF</span>
chmod<span class="w"> </span>+x<span class="w"> </span>/usr/local/sbin/router-apply.sh

log<span class="w"> </span><span class="s2">&quot;Creating systemd oneshot service&quot;</span>
cat<span class="w"> </span>&gt;/etc/systemd/system/router-apply.service<span class="w"> </span><span class="s">&lt;&lt;&#39;EOF&#39;</span>
<span class="s">[Unit]</span>
<span class="s">Description=Apply router LAN + firewall config</span>
<span class="s">After=systemd-networkd.service</span>
<span class="s">Wants=systemd-networkd.service</span>

<span class="s">[Service]</span>
<span class="s">Type=oneshot</span>
<span class="s">ExecStart=/usr/local/sbin/router-apply.sh</span>
<span class="s">RemainAfterExit=yes</span>

<span class="s">[Install]</span>
<span class="s">WantedBy=multi-user.target</span>
<span class="s">EOF</span>

systemctl<span class="w"> </span>daemon-reload
systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>router-apply.service
systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>netfilter-persistent<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">true</span>

<span class="c1"># Run once now</span>
/usr/local/sbin/router-apply.sh

log<span class="w"> </span><span class="s2">&quot;Done.&quot;</span>
ip<span class="w"> </span>-br<span class="w"> </span>addr<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">true</span>
iptables<span class="w"> </span>-L<span class="w"> </span>-v<span class="w"> </span>-n<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">true</span>
systemctl<span class="w"> </span>--no-pager<span class="w"> </span>--full<span class="w"> </span>status<span class="w"> </span>dnsmasq<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">true</span>
</code></pre></div>
<p>Start up the microVM:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>slicer<span class="w"> </span>up<span class="w"> </span>./router.yaml
</code></pre></div>
<p>You can then connect and start viewing the logs from the DHCP/DNS server:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>slicer<span class="w"> </span>vm<span class="w"> </span>shell<span class="w"> </span>--uid<span class="w"> </span><span class="m">1000</span><span class="w"> </span>router-1

<span class="c1"># Then within the microVM:</span>
sudo<span class="w"> </span>journalctl<span class="w"> </span>-u<span class="w"> </span>dnsmasq<span class="w"> </span>--since<span class="w"> </span>today<span class="w"> </span>-f
</code></pre></div>
<h2 id="configure-a-raspberry-pi-to-run-on-lan2">Configure a Raspberry Pi to run on LAN2<a class="headerlink" href="#configure-a-raspberry-pi-to-run-on-lan2" title="Permanent link">&para;</a></h2>
<p><a href="/images/router/rpi4.jpg"><img alt="Raspberry Pi plugged directly into the N100" src="/images/router/rpi4.jpg" /></a></p>
<blockquote>
<p>Raspberry Pi plugged directly into the N100</p>
</blockquote>
<p>Now, we need to configure a Raspberry Pi to run on LAN2.</p>
<p>First, flash the standard 64-bit Raspberry Pi OS Lite (Trixie) image to a microSD card.</p>
<p>i.e. replace <code>sdX</code> with the device name of the microSD card found via <code>lsblk</code>:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/path/to/raspberrypi-os-lite-64-trixie.img<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/dev/sdX<span class="w"> </span><span class="nv">bs</span><span class="o">=</span>4M<span class="w"> </span><span class="nv">status</span><span class="o">=</span>progress<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sync
</code></pre></div>
<p>Next, mount the microSD card so that you can supply config via the boot partition.</p>
<p>We'll be using userdata, and a custom username and password.</p>
<p>Save <code>provision.sh</code>:</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env bash</span>
<span class="nb">set</span><span class="w"> </span>-euo<span class="w"> </span>pipefail

<span class="nv">BOOT</span><span class="o">=</span>/mnt/boot
<span class="nv">HOSTNAME</span><span class="o">=</span>slicer-client-1
<span class="nv">USERNAME</span><span class="o">=</span>alex

<span class="c1"># 1) Generate a strong random password (URL-safe)</span>
<span class="nv">PLAINTEXT_PASS</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>openssl<span class="w"> </span>rand<span class="w"> </span>-base64<span class="w"> </span><span class="m">18</span><span class="k">)</span><span class="s2">&quot;</span>

<span class="c1"># 2) Hash it for cloud-init (SHA-512)</span>
<span class="nv">HASHED_PASS</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>openssl<span class="w"> </span>passwd<span class="w"> </span>-6<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$PLAINTEXT_PASS</span><span class="s2">&quot;</span><span class="k">)</span><span class="s2">&quot;</span>

<span class="c1"># 3) Write user-data</span>
cat<span class="w"> </span><span class="s">&lt;&lt;EOF | sudo tee &quot;$BOOT/user-data&quot; &gt;/dev/null</span>
<span class="s">#cloud-config</span>

<span class="s">hostname: $HOSTNAME</span>
<span class="s">manage_etc_hosts: true</span>

<span class="s">users:</span>
<span class="s">  - name: $USERNAME</span>
<span class="s">    gecos: $USERNAME</span>
<span class="s">    groups: [sudo]</span>
<span class="s">    sudo: ALL=(ALL) NOPASSWD:ALL</span>
<span class="s">    shell: /bin/bash</span>
<span class="s">    lock_passwd: false</span>
<span class="s">    passwd: &quot;$HASHED_PASS&quot;</span>

<span class="s">ssh:</span>
<span class="s">  install-server: true</span>
<span class="s">  allow-pw: true</span>

<span class="s">disable_root: true</span>

<span class="s">package_update: false</span>
<span class="s">package_upgrade: false</span>

<span class="s">runcmd:</span>
<span class="s">  - systemctl enable ssh</span>
<span class="s">  - systemctl start ssh</span>
<span class="s">EOF</span>

<span class="c1"># 4) Write network-config</span>
cat<span class="w"> </span><span class="s">&lt;&lt;EOF | sudo tee &quot;$BOOT/network-config&quot; &gt;/dev/null</span>
<span class="s">version: 2</span>
<span class="s">ethernets:</span>
<span class="s">  eth0:</span>
<span class="s">    dhcp4: true</span>
<span class="s">    dhcp6: false</span>
<span class="s">EOF</span>

<span class="c1"># 5) Write meta-data</span>
cat<span class="w"> </span><span class="s">&lt;&lt;EOF | sudo tee &quot;$BOOT/meta-data&quot; &gt;/dev/null</span>
<span class="s">instance-id: $HOSTNAME</span>
<span class="s">local-hostname: $HOSTNAME</span>
<span class="s">EOF</span>

<span class="c1"># 6) Output credentials (your copy)</span>
<span class="nb">echo</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;======================================&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;  Raspberry Pi credentials generated&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;======================================&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Host:      </span><span class="nv">$HOSTNAME</span><span class="s2">&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;User:      </span><span class="nv">$USERNAME</span><span class="s2">&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Password:  </span><span class="nv">$PLAINTEXT_PASS</span><span class="s2">&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;======================================&quot;</span>
<span class="nb">echo</span>
</code></pre></div>
<p>Mount the SD card's first partition to <code>/mnt/boot</code>, then run the script:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>mount<span class="w"> </span>/dev/sdX1<span class="w"> </span>/mnt/boot
sudo<span class="w"> </span>./provision.sh
sudo<span class="w"> </span>umount<span class="w"> </span>/mnt/boot
</code></pre></div>
<p>Next, make sure the Raspberry Pi is plugged into the network interface on the Slicer host.</p>
<h2 id="access-the-raspberry-pi">Access the Raspberry Pi<a class="headerlink" href="#access-the-raspberry-pi" title="Permanent link">&para;</a></h2>
<p>From the Slicer host, open a shell into the microVM:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>slicer<span class="w"> </span>vm<span class="w"> </span>shell<span class="w"> </span>--uid<span class="w"> </span><span class="m">1000</span><span class="w"> </span>router-1
</code></pre></div>
<p>You can either find the IP given out from the <code>journalctl</code> command we ran earlier, or use nmap to discover the Raspberry Pi on the network:</p>
<div class="highlight"><pre><span></span><code>nmap<span class="w"> </span>-sP<span class="w"> </span><span class="m">10</span>.88.0.0/24
</code></pre></div>
<p>You should see the Raspberry Pi's IP address in the output.</p>
<div class="highlight"><pre><span></span><code>Starting<span class="w"> </span>Nmap<span class="w"> </span><span class="m">7</span>.80<span class="w"> </span><span class="o">(</span><span class="w"> </span>https://nmap.org<span class="w"> </span><span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">2026</span>-01-06<span class="w"> </span><span class="m">10</span>:34<span class="w"> </span>UTC
Nmap<span class="w"> </span>scan<span class="w"> </span>report<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="m">10</span>.88.0.1
Host<span class="w"> </span>is<span class="w"> </span>up<span class="w"> </span><span class="o">(</span><span class="m">0</span>.00041s<span class="w"> </span>latency<span class="o">)</span>.
Nmap<span class="w"> </span>scan<span class="w"> </span>report<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="m">10</span>.88.0.67
Host<span class="w"> </span>is<span class="w"> </span>up<span class="w"> </span><span class="o">(</span><span class="m">0</span>.00068s<span class="w"> </span>latency<span class="o">)</span>.
Nmap<span class="w"> </span><span class="k">done</span>:<span class="w"> </span><span class="m">256</span><span class="w"> </span>IP<span class="w"> </span>addresses<span class="w"> </span><span class="o">(</span><span class="m">2</span><span class="w"> </span>hosts<span class="w"> </span>up<span class="o">)</span><span class="w"> </span>scanned<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">2</span>.32<span class="w"> </span>seconds
</code></pre></div>
<p>You can then connect to the Raspberry Pi over SSH using the credentials from earlier:</p>
<div class="highlight"><pre><span></span><code>ssh<span class="w"> </span><span class="nv">$USERNAME</span>@10.88.0.1
</code></pre></div>
<p>On the Raspberry Pi, you'll be able to ping the microVM's IP address, and access the Internet via the router/firewall microVM.</p>
<div class="highlight"><pre><span></span><code>ubuntu@router-1:~$<span class="w"> </span>ping<span class="w"> </span>-c1<span class="w"> </span><span class="m">10</span>.88.0.1
PING<span class="w"> </span><span class="m">10</span>.88.0.1<span class="w"> </span><span class="o">(</span><span class="m">10</span>.88.0.1<span class="o">)</span><span class="w"> </span><span class="m">56</span><span class="o">(</span><span class="m">84</span><span class="o">)</span><span class="w"> </span>bytes<span class="w"> </span>of<span class="w"> </span>data.
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">10</span>.88.0.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">0</span>.073<span class="w"> </span>ms

---<span class="w"> </span><span class="m">10</span>.88.0.1<span class="w"> </span>ping<span class="w"> </span>statistics<span class="w"> </span>---
<span class="m">1</span><span class="w"> </span>packets<span class="w"> </span>transmitted,<span class="w"> </span><span class="m">1</span><span class="w"> </span>received,<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>packet<span class="w"> </span>loss,<span class="w"> </span><span class="nb">time</span><span class="w"> </span>0ms
rtt<span class="w"> </span>min/avg/max/mdev<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>.073/0.073/0.073/0.000<span class="w"> </span>ms
ubuntu@router-1:~$<span class="w"> </span>ping<span class="w"> </span>-c1<span class="w"> </span><span class="m">8</span>.8.8.8
PING<span class="w"> </span><span class="m">8</span>.8.8.8<span class="w"> </span><span class="o">(</span><span class="m">8</span>.8.8.8<span class="o">)</span><span class="w"> </span><span class="m">56</span><span class="o">(</span><span class="m">84</span><span class="o">)</span><span class="w"> </span>bytes<span class="w"> </span>of<span class="w"> </span>data.
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">8</span>.8.8.8:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">118</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">7</span>.51<span class="w"> </span>ms

---<span class="w"> </span><span class="m">8</span>.8.8.8<span class="w"> </span>ping<span class="w"> </span>statistics<span class="w"> </span>---
<span class="m">1</span><span class="w"> </span>packets<span class="w"> </span>transmitted,<span class="w"> </span><span class="m">1</span><span class="w"> </span>received,<span class="w"> </span><span class="m">0</span>%<span class="w"> </span>packet<span class="w"> </span>loss,<span class="w"> </span><span class="nb">time</span><span class="w"> </span>0ms
rtt<span class="w"> </span>min/avg/max/mdev<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">7</span>.507/7.507/7.507/0.000<span class="w"> </span>ms
ubuntu@router-1:~$<span class="w"> </span>curl<span class="w"> </span>google.com
&lt;HTML&gt;&lt;HEAD&gt;&lt;meta<span class="w"> </span>http-equiv<span class="o">=</span><span class="s2">&quot;content-type&quot;</span><span class="w"> </span><span class="nv">content</span><span class="o">=</span><span class="s2">&quot;text/html;charset=utf-8&quot;</span>&gt;
&lt;TITLE&gt;301<span class="w"> </span>Moved&lt;/TITLE&gt;&lt;/HEAD&gt;&lt;BODY&gt;
&lt;H1&gt;301<span class="w"> </span>Moved&lt;/H1&gt;
The<span class="w"> </span>document<span class="w"> </span>has<span class="w"> </span>moved
&lt;A<span class="w"> </span><span class="nv">HREF</span><span class="o">=</span><span class="s2">&quot;http://www.google.com/&quot;</span>&gt;here&lt;/A&gt;.
&lt;/BODY&gt;&lt;/HTML&gt;
ubuntu@router-1:~$<span class="w"> </span>
</code></pre></div>
<h2 id="block-access-to-your-main-network">Block access to your main network<a class="headerlink" href="#block-access-to-your-main-network" title="Permanent link">&para;</a></h2>
<p>By using iptables, you can block access to your main network (LAN1) from LAN2. This creates a Demilitarized Zone (DMZ) where devices on LAN2 can access the Internet and the router itself, but not the rest of your main network.</p>
<p>For example, if your main network is <code>192.168.1.0/24</code> (different from the router's LAN1 interface subnet <code>192.168.130.0/24</code>), you can firewall it off so that LAN2 only has access to the Internet and the microVM router.</p>
<p>Add this iptables rule to your userdata script <strong>before</strong> the existing FORWARD ACCEPT rules. Since iptables evaluates rules in order, the DROP rule must come before the ACCEPT rule:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Block access to LAN1 network (192.168.1.0/24) from LAN2</span>
<span class="c1"># IMPORTANT: This must be inserted BEFORE the existing ACCEPT rules</span>
<span class="c1"># The -I flag inserts at position 1 (beginning of chain), so it&#39;s evaluated first</span>
iptables<span class="w"> </span>-I<span class="w"> </span>FORWARD<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">LAN_IF</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span>-d<span class="w"> </span><span class="m">192</span>.168.1.0/24<span class="w"> </span>-j<span class="w"> </span>DROP
</code></pre></div>
<p>Here's what the full table ends up looking like on the microVM end:</p>
<div class="highlight"><pre><span></span><code>root@router-1:~#<span class="w"> </span>iptables<span class="w"> </span>-L<span class="w"> </span>-n<span class="w"> </span>-v
Chain<span class="w"> </span>INPUT<span class="w"> </span><span class="o">(</span>policy<span class="w"> </span>ACCEPT<span class="w"> </span><span class="m">0</span><span class="w"> </span>packets,<span class="w"> </span><span class="m">0</span><span class="w"> </span>bytes<span class="o">)</span>
<span class="w"> </span>pkts<span class="w"> </span>bytes<span class="w"> </span>target<span class="w">     </span>prot<span class="w"> </span>opt<span class="w"> </span><span class="k">in</span><span class="w">     </span>out<span class="w">     </span><span class="nb">source</span><span class="w">               </span>destination<span class="w">         </span>
<span class="w">    </span><span class="m">2</span><span class="w">   </span><span class="m">654</span><span class="w"> </span>ACCEPT<span class="w">     </span>udp<span class="w">  </span>--<span class="w">  </span>ens7<span class="w">   </span>*<span class="w">       </span><span class="m">0</span>.0.0.0/0<span class="w">            </span><span class="m">0</span>.0.0.0/0<span class="w">            </span>udp<span class="w"> </span>dpt:67
<span class="w">    </span><span class="m">2</span><span class="w">   </span><span class="m">134</span><span class="w"> </span>ACCEPT<span class="w">     </span>udp<span class="w">  </span>--<span class="w">  </span>ens7<span class="w">   </span>*<span class="w">       </span><span class="m">0</span>.0.0.0/0<span class="w">            </span><span class="m">0</span>.0.0.0/0<span class="w">            </span>udp<span class="w"> </span>dpt:53
<span class="w">    </span><span class="m">0</span><span class="w">     </span><span class="m">0</span><span class="w"> </span>ACCEPT<span class="w">     </span>tcp<span class="w">  </span>--<span class="w">  </span>ens7<span class="w">   </span>*<span class="w">       </span><span class="m">0</span>.0.0.0/0<span class="w">            </span><span class="m">0</span>.0.0.0/0<span class="w">            </span>tcp<span class="w"> </span>dpt:53

Chain<span class="w"> </span>FORWARD<span class="w"> </span><span class="o">(</span>policy<span class="w"> </span>ACCEPT<span class="w"> </span><span class="m">0</span><span class="w"> </span>packets,<span class="w"> </span><span class="m">0</span><span class="w"> </span>bytes<span class="o">)</span>
<span class="w"> </span>pkts<span class="w"> </span>bytes<span class="w"> </span>target<span class="w">     </span>prot<span class="w"> </span>opt<span class="w"> </span><span class="k">in</span><span class="w">     </span>out<span class="w">     </span><span class="nb">source</span><span class="w">               </span>destination<span class="w">         </span>
<span class="w">    </span><span class="m">0</span><span class="w">     </span><span class="m">0</span><span class="w"> </span>DROP<span class="w">       </span>all<span class="w">  </span>--<span class="w">  </span>ens7<span class="w">   </span>*<span class="w">       </span><span class="m">0</span>.0.0.0/0<span class="w">            </span><span class="m">192</span>.168.1.0/24<span class="w">      </span>
<span class="w">    </span><span class="m">8</span><span class="w">   </span><span class="m">608</span><span class="w"> </span>ACCEPT<span class="w">     </span>all<span class="w">  </span>--<span class="w">  </span>ens7<span class="w">   </span>eth0<span class="w">    </span><span class="m">10</span>.88.0.0/24<span class="w">         </span><span class="m">0</span>.0.0.0/0<span class="w">           </span>
<span class="w">    </span><span class="m">8</span><span class="w">   </span><span class="m">608</span><span class="w"> </span>ACCEPT<span class="w">     </span>all<span class="w">  </span>--<span class="w">  </span>eth0<span class="w">   </span>ens7<span class="w">    </span><span class="m">0</span>.0.0.0/0<span class="w">            </span><span class="m">10</span>.88.0.0/24<span class="w">         </span>ctstate<span class="w"> </span>RELATED,ESTABLISHED

Chain<span class="w"> </span>OUTPUT<span class="w"> </span><span class="o">(</span>policy<span class="w"> </span>ACCEPT<span class="w"> </span><span class="m">0</span><span class="w"> </span>packets,<span class="w"> </span><span class="m">0</span><span class="w"> </span>bytes<span class="o">)</span>
<span class="w"> </span>pkts<span class="w"> </span>bytes<span class="w"> </span>target<span class="w">     </span>prot<span class="w"> </span>opt<span class="w"> </span><span class="k">in</span><span class="w">     </span>out<span class="w">     </span><span class="nb">source</span><span class="w">               </span>destination<span class="w">         </span>
root@router-1:~#
</code></pre></div>
<p>Place this rule in your userdata script before the existing FORWARD rules (around line 269-274). The <code>-I</code> flag inserts the rule at the beginning of the FORWARD chain, ensuring it's evaluated before the general ACCEPT rule that allows all LAN2 -&gt; LAN1 traffic.</p>
<p>The existing rules already handle:
- Access to the router itself (INPUT rules allow DNS/DHCP on <code>${LAN_IF}</code>)
- Established connections back from Internet (the existing FORWARD rule with <code>ESTABLISHED,RELATED</code>)</p>
<p>With this rule in place, devices on LAN2 can:
- Access the Internet (via NAT masquerade through <code>${WAN_IF}</code> which connects to LAN1)
- Access the router/firewall microVM itself (10.88.0.1) for DNS and DHCP
- <strong>Not</strong> access any devices on LAN1 (<code>192.168.1.0/24</code>)</p>
<p>This setup is ideal for running servers, CI runners, and other services exposed to the Internet through tunnels such as <a href="https://inlets.dev">Inlets</a>.</p>
<h2 id="wrapping-up">Wrapping up<a class="headerlink" href="#wrapping-up" title="Permanent link">&para;</a></h2>
<p>You've now created a lightweight Linux router/firewall which physically isolates LAN2 from LAN1.</p>
<p><a href="/images/router/n100-vfio-rpi.png"><img alt="Raspberry Pi connected to the N100" src="/images/router/n100-vfio-rpi.png" /></a></p>
<blockquote>
<p>Raspberry Pi accessing the Internet via the router/firewall microVM.</p>
</blockquote>
<p>In the screenshot, the top pane shows the PCI device being passed through to the microVM. The left pane shows the output of the Linux daemons providing IP addresses via DHCP and DNS. The right pane shows the Raspberry Pi being able to access the Internet via the new LAN2 IP range.</p>
<p>LAN2 has its own IP range: <code>10.88.0.0/24</code> and all devices must pass through the microVM to access the Internet or LAN1.</p>
<p>See the <a href="#block-access-to-your-main-network">Block access to your main network</a> section above for instructions on how to firewall off your main network from LAN2.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 OpenFaaS Ltd

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/self-actuated/" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/selfactuated" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
    
  </body>
</html>